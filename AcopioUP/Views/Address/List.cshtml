@using System.Text.RegularExpressions
@model IEnumerable<AcopioUP.Models.ApplicationUser>
@{
    ViewBag.Title = "List";
}

<h2>Centros de Acopio</h2>

@if (!Model.Any())
{
    <p>No hay Centros de acopio agregados aun</p>
}

@{
    var total = Model.Count();
}

<div class="container">
    <div class="row">
        @for (var i = 0; i < total; i++)
        {
            var collector = Model.ElementAt(i);
            <div class="col-md-4 panel">
                <div class="panel-body">
                    <img class="img-responsive"
                         src="https://maps.googleapis.com/maps/api/staticmap?center=@collector.Address.Lat,@collector.Address.Long&zoom=14&size=282x198&maptype=roadmap&markers=@collector.Address.Lat,@collector.Address.Long&key=AIzaSyB2dQPK3V1LjJu_-cTTeV-9qTyPEfsEynw"
                         alt="Image">
                    <h4 class="card-title">@collector.Name</h4>
                    <p class="card-text">@collector.Address.StreetAddress</p>
                </div>
                <div class="panel-footer">
                    <div style="text-align: center;">
                        <small>@Regex.Replace(collector.PhoneNumber, @"(\d{3})(\d{3})(\d{4})", "$1-$2-$3")</small>
                        <small class="text-muted">@Html.ActionLink("Editar", "EditProfile", "Account", new { @userId = collector.Id }, new { @class = "btn btn-info" })</small>
                    </div>
                </div>
            </div>
        }
    </div>
</div>